<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>The Press Pulp</title>

  <link href='http://fonts.googleapis.com/css?family=Merriweather:900,800,700,400,300italic,400italic,300' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800,300' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="css/foundation.css">
  <link rel="stylesheet" href="css/main.css">


  <script src="js/vendor/jquery.js"></script>
  <script src="js/vendor/parsley.min.js"></script>
  <script src="js/vendor/parsley.min.js"></script>
  <script src="js/vendor/matchMedia.js"></script>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="column large-8 large-centered">

        <div class="introduce">
          <div class="header">
            <h1 class="text-center">The Press Pulp</h1>
            <div class="row">
              <div class="column large-4">
                <h2>Receive regular updates with links to all of your digital coverage.</h2>
              </div>
              <div class="column large-4">
                <h2>Have your coverage graded on sentiment and brand values.</h2>
              </div>
              <div class="column large-4">
                <h2>Receive hard data on the reach and demographic of your coverage.</h2>
              </div>
            </div>
          </div>
          <div class="details">
            <form for="/submit" data-validate="parsley">
              <div class="row">
                <div class="column large-2">
                  <label class="inline">Email</label>
                </div>
                <div class="column large-7">
                  <input id="email" type="text" value="" placeholder="Enter your email to find out more..." data-required="true"/>
                </div>
                <div class="column large-3">
                  <button class="button expand">Find out more</button>
                </div>
              </div>
            </form>

            <script src="http://www.parsecdn.com/js/parse-1.2.12.min.js"></script>
            <script type="text/javascript">
              Parse.initialize("clilZVYHeuyFY8CtFExZG3lMPCZpM4dGgLHBEM6W", "rL0PyxC4xFmEJ72hWz3lVGynPKZSptoL1UnjLAkx");
              var User = Parse.Object.extend("Lead");

              $(function(){
                $("form").submit(function(e){
                  if ($('form').parsley('validate')) {
                    var user = new User();

                    user.set("email", $("#email").val());

                    console.log(user);
                    user.save(null, {
                      success: function(user) {
                        $(".details").slideUp(300, function(){
                          $(".details").html("<h2><b>Thanks for registering your interest!</b> We'll be in touch shortly!</h2>");
                          $(".details").slideDown(300);
                        });
                      },
                      error: function(user, error) {
                        alert('Failed to create new object, with error code: ' + error.description);
                      }
                    });
                  } else {
                  }
                  e.preventDefault();
                });
              });
            </script>
          </div>
          <a id="show-about" class="small-button" href="#">About</a>
        </div>


        <div class="about">
          <div class="header">
            <h1 class="text-center">The Press Pulp</h1>
            <h2>More about The Press Pulp</h2>
          </div>
          <a id="show-home" class="small-button" href="#">About</a>
        </div>

        <script type="text/javascript">
          $(function(){
            $("#show-about").click(function(e){
              $(".introduce").slideUp(500, function(){
                $(".about").slideDown(500);
              })
              mixpanel.track("view:about");
              e.preventDefault();
            });

            $("#show-home").click(function(e){
              $(".about").slideUp(500, function(){
                $(".introduce").slideDown(500);
              })
              e.preventDefault();
            });
          });
        </script>

      </div>
    </div>
  </div>

  <script>
    var onMediaMatch = function() {
      if (window.matchMedia("only screen and (min-width: 48em)").matches) {
        $("#email").attr("placeholder", "Enter your email to find out more...");
        $("#twitter").attr("placeholder", "Your Twitter handle");
      } else {
        $("#email").attr("placeholder", "Email");
        $("#twitter").attr("placeholder", "Twitter handle");
      }
    };

    $(function(){
      onMediaMatch();
      $(window).resize(function() {onMediaMatch()});
    });
  </script>

</body>
</html>
